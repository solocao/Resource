<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<link href="../css/mui.min.css" rel="stylesheet" />
		<style>
			/*
 *这是单独为hello mui准备的个性化css，可以覆盖标准mui的css定义；
 * 在实际项目开发时，建议为App单独写一个css文件，从而实现项目的自定义皮肤功能；
 * 
 * */
			
			.mui-plus.mui-android header.mui-bar {
				float: left;
			}
			
			.mui-plus.mui-android .mui-bar-nav~.mui-content {
				padding-top: 41px;
			}
			
			.mui-active .mui-icon,
			.mui-tab-label {
				color: #45C018;
			}
			/*hm开头的表示仅为 Hello MUI示例定义*/
			
			.hm-description {
				margin: .5em 0;
			}
			
			.hm-description>li {
				font-size: 14px;
				color: #8f8f94;
			}
			
			.mui-bar-nav {
				background: #393a3e;
			}
			
			.mui-icon-arrowthinleft,
			.mui-pull-left,
			.mui-pull-right {
				color: white;
			}
			
			.mui-icon-mic {
				padding-left: 5px;
				float: left;
			}
			
			html,
			body {
				height: 100%;
				overflow: hidden;
			}
			
			.mui-bar {
				-webkit-box-shadow: none;
				box-shadow: none;
			}
			
			.faxianListMedia {
				height: 30px;
				line-height: 30px;
				overflow: hidden;
				float: left;
				padding-left: 15px;
			}
			
			.faxianImage {
				width: 30px;
				height: 30px;
				float: left;
			}
			
			html,
			body {
				height: 100%;
				margin: 0px;
				padding: 0px;
				overflow: hidden;
				-webkit-touch-callout: none;
				-webkit-user-select: none;
			}
			
			footer {
				position: fixed;
				width: 100%;
				height: 50px;
				min-height: 50px;
				border-top: solid 1px #bbb;
				left: 0px;
				bottom: 0px;
				overflow: hidden;
				padding: 0px 50px;
				background-color: #fafafa;
			}
			
			.footer-left {
				position: absolute;
				width: 50px;
				height: 50px;
				left: 0px;
				/*bottom: 0px;*/
				text-align: center;
				vertical-align: middle;
				line-height: 100%;
				padding: 12px 4px;
			}
			
			.footer-right {
				position: absolute;
				width: 50px;
				height: 50px;
				right: 0px;
				bottom: 0px;
				text-align: center;
				vertical-align: middle;
				line-height: 100%;
				padding: 12px 5px;
				display: inline-block;
			}
			
			.footer-center {
				height: 100%;
				padding: 5px 0px;
			}
			
			.footer-center [class*=input] {
				width: 100%;
				height: 100%;
				border-radius: 5px;
			}
			
			.footer-center .input-text {
				background: #fff;
				border: solid 1px #ddd;
				padding: 10px !important;
				font-size: 16px !important;
				line-height: 18px !important;
				font-family: verdana !important;
				overflow: hidden;
			}
			
			.footer-center .input-sound {
				background-color: #eee;
			}
			
			.mui-content {
				height: 100%;
				padding: 44px 0px 50px 0px;
				overflow: auto;
				background-color: #eaeaea;
			}
			
			#msg-list {
				height: 100%;
				overflow: auto;
				-webkit-overflow-scrolling: touch;
			}
			
			.msg-item {
				padding: 8px;
				clear: both;
			}
			
			.msg-item .mui-item-clear {
				clear: both;
			}
			
			.msg-item .msg-user {
				width: 38px;
				height: 38px;
				border: solid 1px #d3d3d3;
				display: inline-block;
				background: #fff;
				border-radius: 3px;
				vertical-align: top;
				text-align: center;
				float: left;
				padding: 3px;
				color: #ddd;
			}
			
			.msg-item .msg-user-img {
				width: 38px;
				height: 38px;
				display: inline-block;
				border-radius: 3px;
				vertical-align: top;
				text-align: center;
				float: left;
				color: #ddd;
			}
			
			.msg-item .msg-content {
				display: inline-block;
				border-radius: 5px;
				border: solid 1px #d3d3d3;
				background-color: #FFFFFF;
				color: #333;
				padding: 8px;
				vertical-align: top;
				font-size: 15px;
				position: relative;
				margin: 0px 8px;
				max-width: 75%;
				min-width: 35px;
				float: left;
			}
			
			.msg-item .msg-content .msg-content-inner {
				overflow-x: hidden;
			}
			
			.msg-item .msg-content .msg-content-arrow {
				position: absolute;
				border: solid 1px #d3d3d3;
				border-right: none;
				border-top: none;
				background-color: #FFFFFF;
				width: 10px;
				height: 10px;
				left: -5px;
				top: 12px;
				-webkit-transform: rotateZ(45deg);
				transform: rotateZ(45deg);
			}
			
			.msg-item-self .msg-user,
			.msg-item-self .msg-content {
				float: right;
			}
			
			.msg-item-self .msg-content .msg-content-arrow {
				left: auto;
				right: -5px;
				-webkit-transform: rotateZ(225deg);
				transform: rotateZ(225deg);
			}
			
			.msg-item-self .msg-content,
			.msg-item-self .msg-content .msg-content-arrow {
				background-color: #4CD964;
				color: #fff;
				border-color: #2AC845;
			}
			
			footer .mui-icon {
				color: #000;
			}
			
			footer .mui-icon:active {
				color: #007AFF !important;
			}
			
			footer .mui-icon-paperplane:before {
				content: "发送";
			}
			
			footer .mui-icon-paperplane {
				/*-webkit-transform: rotateZ(45deg);
				transform: rotateZ(45deg);*/
				font-size: 16px;
				word-break: keep-all;
				line-height: 100%;
				padding-top: 6px;
				color: rgba(0, 135, 250, 1);
			}
			
			#msg-sound {
				-webkit-user-select: none !important;
				user-select: none !important;
			}
			
			.rprogress {
				position: absolute;
				left: 50%;
				top: 50%;
				width: 140px;
				height: 140px;
				margin-left: -70px;
				margin-top: -70px;
				background-image: url(../images/arecord.png);
				background-repeat: no-repeat;
				background-position: center center;
				background-size: 30px 30px;
				background-color: rgba(0, 0, 0, 0.7);
				border-radius: 5px;
				display: none;
				-webkit-transition: .15s;
			}
			
			.rschedule {
				background-color: rgba(0, 0, 0, 0);
				border: 5px solid rgba(0, 183, 229, 0.9);
				opacity: .9;
				border-left: 5px solid rgba(0, 0, 0, 0);
				border-right: 5px solid rgba(0, 0, 0, 0);
				border-radius: 50px;
				box-shadow: 0 0 15px #2187e7;
				width: 46px;
				height: 46px;
				position: absolute;
				left: 50%;
				top: 50%;
				margin-left: -23px;
				margin-top: -23px;
				-webkit-animation: spin 1s infinite linear;
				animation: spin 1s infinite linear;
			}
			
			.r-sigh {
				display: none;
				border-radius: 50px;
				box-shadow: 0 0 15px #2187e7;
				width: 46px;
				height: 46px;
				position: absolute;
				left: 50%;
				top: 50%;
				margin-left: -23px;
				margin-top: -23px;
				text-align: center;
				line-height: 46px;
				font-size: 40px;
				font-weight: bold;
				color: #2187e7;
			}
			
			.rprogress-sigh {
				background-image: none !important;
			}
			
			.rprogress-sigh .rschedule {
				display: none !important;
			}
			
			.rprogress-sigh .r-sigh {
				display: block !important;
			}
			
			.rsalert {
				font-size: 12px;
				color: #bbb;
				text-align: center;
				position: absolute;
				border-radius: 5px;
				width: 130px;
				margin: 5px 5px;
				padding: 5px;
				left: 0px;
				bottom: 0px;
			}
			
			@-webkit-keyframes spin {
				0% {
					-webkit-transform: rotate(0deg);
				}
				100% {
					-webkit-transform: rotate(360deg);
				}
			}
			
			@keyframes spin {
				0% {
					transform: rotate(0deg);
				}
				100% {
					transform: rotate(360deg);
				}
			}
			
			#h {
				background: #fff;
				border: solid 1px #ddd;
				padding: 10px !important;
				font-size: 16px !important;
				font-family: verdana !important;
				line-height: 18px !important;
				overflow: visible;
				position: absolute;
				left: -1000px;
				right: 0px;
				word-break: break-all;
				word-wrap: break-word;
			}
			
			.cancel {
				background-color: darkred;
			}
			.mui-bar-tab{display:inline;height:auto;}
		</style>
		<link rel="stylesheet" type="text/css" href="css/main.css" />
	</head>

	<body contextmenu="return false;">
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left" id="title"></a>
		</header>
		<pre id='h'></pre>

		<div class="mui-content">
			<div id='msg-list'>
				<!--好友发送图片格式-->
				<div class="msg-item 1msg-item-self1 msg-type msg-content">

					<img class="msg-user-img" src="../img/1.jpg" alt="" />

					<div class="msg-content">
						<div class="msg-content-inner">

							<img class="msg-content-image" src="../img/4.jpg" style="max-width: 100px;" />

						</div>
						<div class="msg-content-arrow"></div>
					</div>
					<div class="mui-item-clear"></div>
				</div>
				<!--好友的文本格式-->
				<div class="msg-item msg-item-self1 msg-type msg-content">
					<img class="msg-user-img" src="../img/1.jpg" alt="" />
					<div class="msg-content">
						<div class="msg-content-inner">
							你好
						</div>
						<div class="msg-content-arrow"></div>
					</div>
					<div class="mui-item-clear"></div>
				</div>
				<!--自己的文本格式
				<div class="msg-item msg-item-self msg-content">
					<img class="msg-user-img" src="../img/2.jpg" style="float:right" />
					<div class="msg-content">
						<div class="msg-content-inner">
							你好
						</div>
						<div class="msg-content-arrow"></div>
					</div>
					<div class="mui-item-clear"></div>
				</div>
				-->
				
				<!--自己发送图片格式
				<div class="msg-item msg-item-self msg-type msg-content">

					<img class="msg-user-img" src="../img/2.jpg" alt="" style="float: right;" />

					<div class="msg-content">
						<div class="msg-content-inner">

							<img class="msg-content-image" src="../img/4.jpg" style="max-width: 100px;" />

						</div>
						<div class="msg-content-arrow"></div>
					</div>
					<div class="mui-item-clear"></div>
				</div>
				-->
				
				
			</div>
			

			
			
			
		</div>
	
		<!--底部发送消息内容-->
		<nav class="mui-bar mui-bar-tab" style="padding-top: 15px;">
		    <i id='msg-image' class="mui-icon mui-icon-plus" style="font-size: 28px;float:left;width:15%;padding-left:10px;"></i>
		    <textarea id='msg-text' type="text" class='input-text' style="float:left;width:70%;height:50px;border-radius:10px;"></textarea>
		    <i id='msg-type' class="mui-icon mui-icon-paperplane" style="float:left;width:15%;padding-left:10px;"></i>
		
			<!--九宫格-->
			<div id="Gallery" class="mui-slider" style="margin-top:15px;display: none;">
				<div class="mui-slider-group">
					<div class="mui-slider-item">
						<ul class="mui-table-view mui-grid-view mui-grid-9">
							<li id="galleryID" class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-image"></span>
									<div class="mui-media-body">相册</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-email"><span class="mui-badge">5</span></span>
									<div class="mui-media-body">Email</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-chatbubble"></span>
									<div class="mui-media-body">Chat</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-location"></span>
									<div class="mui-media-body">location</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-search"></span>
									<div class="mui-media-body">Search</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-phone"></span>
									<div class="mui-media-body">Phone</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-gear"></span>
									<div class="mui-media-body">Setting</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-info"></span>
									<div class="mui-media-body">about</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-more"></span>
									<div class="mui-media-body">more</div>
								</a>
							</li>
						</ul>
					</div>
					<div class="mui-slider-item">
						<ul class="mui-table-view mui-grid-view mui-grid-9">
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-home"></span>
									<div class="mui-media-body">Home</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-email"><span class="mui-badge">5</span></span>
									<div class="mui-media-body">Email</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-chatbubble"></span>
									<div class="mui-media-body">Chat</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-location"></span>
									<div class="mui-media-body">location</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-search"></span>
									<div class="mui-media-body">Search</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-phone"></span>
									<div class="mui-media-body">Phone</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-gear"></span>
									<div class="mui-media-body">Setting</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-info"></span>
									<div class="mui-media-body">about</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-more"></span>
									<div class="mui-media-body">more</div>
								</a>
							</li>
						</ul>
					</div>
					<div class="mui-slider-item">
						<ul class="mui-table-view mui-grid-view mui-grid-9">
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-home"></span>
									<div class="mui-media-body">Home</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-email"><span class="mui-badge">5</span></span>
									<div class="mui-media-body">Email</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-chatbubble"></span>
									<div class="mui-media-body">Chat</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-location"></span>
									<div class="mui-media-body">location</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-search"></span>
									<div class="mui-media-body">Search</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-phone"></span>
									<div class="mui-media-body">Phone</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-gear"></span>
									<div class="mui-media-body">Setting</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-info"></span>
									<div class="mui-media-body">about</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
								<a href="#">
									<span class="mui-icon mui-icon-more"></span>
									<div class="mui-media-body">more</div>
								</a>
							</li>
						</ul>
					</div>

				</div>
				<div class="mui-slider-indicator">
					<div class="mui-indicator mui-active"></div>
					<div class="mui-indicator"></div>
					<div class="mui-indicator"></div>
				</div>
			</div>
			
		
		</nav>
		
	
	
		
		<script src="../js/mui.min.js"></script>
		<script type="text/javascript" src="../js/jquery-1.11.0.min.js"></script>
		<script type="text/javascript">
			
			//加载完成事件
			mui.plusReady(function(){
				//获取当前显示页面的webView
				var curWebView = plus.webview.currentWebview();
				//通过webView读取传递过来的name好友名称
				var name = curWebView.name;
				//更新到页面指定的标题栏位置
				document.getElementById("title").innerText=name;
				
				
				//获取
				var sendNode = document.getElementById("msg-type");
				//给发送图标sendNode对象注册tap轻击事件
				//事件源对象.addEventListener(事件名称,事件函数);
				sendNode.addEventListener("tap",function(){
					//文本框里面的消息内容
					var content = $("#msg-text").val();
					//判断消息的有效性，不为空或空字符串再发送
					if(content){
						//拼接聊天信息格式
						var html = "<div class=\"msg-item msg-item-self msg-content\">"+
										"<img class=\"msg-user-img\" src=\"../img/2.jpg\" style=\"float:right\" />"+
										"<div class=\"msg-content\">"+
											"<div class=\"msg-content-inner\">"+
												content+
											"</div>"
											"<div class=\"msg-content-arrow\"></div>"+
										"</div>"+
										"<div class=\"mui-item-clear\"></div>"+
									"</div>";
						//发送文本聊天信息,将拼接的消息追加到聊天消息列表中
						$("#msg-list").append(html);
						//清空消息框内容
						$("#msg-text").val("");
						//清空消息直接的换行
						$("br").remove();
						//在整个消息列表最后追加换行，目的让最后一个消息显示出来
						$("#msg-list").append("<br/><br/><br/><br/><br/><br/>");
					}
				});
				
				//获取加号对象
				var jiaNode = $("#msg-image")[0];
				//给加号注册轻击事件
				jiaNode.addEventListener("tap",function(){
					//获取九宫格显示状态
					var display = $("#Gallery").css("display");
					//判断display是否为隐藏
					if(display=="none"){
						//打开九宫格
						$("#Gallery").css("display","block");
					}else{
						//隐藏九宫格
						$("#Gallery").css("display","none");
					}
					
					
				});
				
				
				//给相册注册轻击事件
				 var galleryIDNode = $("#galleryID")[0];
				 galleryIDNode.addEventListener("tap",function(){
				 	//打开手机系统相册
				 	//打开相册只选择一张图片的语法：plus.gallery.pick(function(path){}); path是选择图片的路径
				 	//打开相册选择多张图片：plus.gallery.pick(function(e){ e.files获取多个图片路径的数组}，function(){},{参数设置})
				 	//	{参数设置}，格式{filter:"image",multiple:true}设置filter过滤相册值为"image",multiple设置是否支持选择多张图片
				 	plus.gallery.pick(function(e){
				 		//处理返回多张图片的路径的数组
				 		var images = e.files;
				 		//遍历数组，获取每张图片路径进行发送消息图片
				 		for(var i in images){
				 			//每个图片路径
				 			var path = images[i];
				 			//拼接发送图片数据html格式
				 			var html = "<div class=\"msg-item msg-item-self msg-type msg-content\">"+

											"<img class=\"msg-user-img\" src=\"../img/2.jpg\" alt=\"\" style=\"float: right;\" />"+
						
											"<div class=\"msg-content\">"+
												"<div class=\"msg-content-inner\">"+
						
													"<img class=\"msg-content-image\" src=\""+path+"\" style=\"max-width: 100px;\" />"+
						
												"</div>"+
												"<div class=\"msg-content-arrow\"></div>"+
											"</div>"+
											"<div class=\"mui-item-clear\"></div>"+
										"</div>";
				 			//将拼接好的html追加到消息列表中
				 			$("#msg-list").append(html);
				 		}
				 		
				 		//隐藏九宫格
				 		$("#Gallery").css("display","none");
				 		//清空消息直接的换行
						$("br").remove();
						//在整个消息列表最后追加换行，目的让最后一个消息显示出来
						$("#msg-list").append("<br/><br/><br/><br/><br/><br/>");
				 		
				 		
				 	},function(){},{filter:"image",multiple:true});
				 });
			});
		</script>
	</body>

</html>